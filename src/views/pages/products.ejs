<div class="page-wrapper">
  <!-- start preloader -->
  <%- include('../components/ui/preloader') %>
  <!-- end preloader -->
  <!-- Start header -->
  <%- include('../components/ui/header') %>
  <!-- end of header -->

  <!-- start wpo-page-title -->
  <section class="wpo-page-title" style="background: url(/assets/images/banner/product.webp) no-repeat center top / cover">
    <div class="container">
      <div class="row">
        <div class="col col-xs-12">
          <div class="wpo-search-section">
            <h3>Customizable Private Tours with Local Tour Guides</h3>
            <span class="subtitle">Choose Local Tour Guides at the Destination of Your Choice. Simply Message Them To Personalize Your Tour!</span>

            <form action="/products/search" method="get">
              <div class="input-group flex-nowrap">
                <span class="input-group-text" id="addon-wrapping">
                  <i class="fa fa-search" aria-hidden="true"></i>
                </span>
                <input type="text" name="search" class="form-control" placeholder="Where to?" aria-label="Where to?" aria-describedby="addon-wrapping" />
              </div>
            </form>
          </div>
        </div>
      </div>
      <!-- end row -->
    </div>
    <!-- end container -->
  </section>
  <!-- end page-title -->

  <!-- start wpo-shop-section -->
  <section class="wpo-shop-section section-padding">
    <div class="container">
      <section>
        <h3 class="title-section">Destinasi Terbaik</h3>
        <div class="custom-grid">
          <% bestDestinations.forEach(location => { %>
          <div class="location-item">
            <div class="img-holder">
              <img src="<%= location.thumbnail %>" alt="location thumbnail" />
            </div>
            <span class="fw-bold"><%= location.name %></span>
          </div>
          <% }) %>
        </div>
      </section>

      <section>
        <h3 class="title-section">Pengalaman Terbaik</h3>
        <div class="row">
          <div class="col col-xs-12">
            <div class="shop-grids clearfix">
              <% bestExperiences.forEach(product => { %>
              <a href="/products/<%= product.products_id %>">
                <div class="grid">
                  <div class="img-container">
                    <div class="img-holder">
                      <img src="<%= product.banners.length > 0 ? product.banners[0] : '/assets/images/shop/1.jpg'%> " alt="image" />
                    </div>
                    <div class="img-mini">
                      <% product?.banners?.forEach(image => { %>
                      <div class="img-mini-item">
                        <img src="<%= image %>" alt="image banner" />
                      </div>
                      <% }) %>
                    </div>
                  </div>
                  <div class="details">
                    <h3>
                      <span><%= product.products_name %></span>
                    </h3>
                    <div class="metadata">
                      <span class="badge text-bg-secondary"><%= product.locationName %></span>
                      <span class="badge text-bg-secondary"><%= product.products_serviceTime %></span>
                    </div>
                    <span class="description"> <%= product.products_description %> </span>
                    <span class="price">
                      <span>From</span>
                      <h3><%= product.price %></h3>
                      <span>/ per group</span>
                    </span>
                  </div>
                </div>
              </a>
              <% }) %>
            </div>
            <div class="pagination-wrapper pagination-wrapper-center">
              <ul class="pg-pagination">
                <% if (page != 1) { %>
                <li>
                  <a href="/products?page=<%= page - 1 %>" aria-label="Previous">
                    <i class="ti-angle-left"></i>
                  </a>
                </li>
                <% } %>
                <% for( let index = 1; index <= totalPage; index++ ) { %>
                <li class="<%= page == index ? 'active' : '' %>">
                  <a href="/products?page=<%= index %>"><%= index %></a>
                </li>
                <% } %>
                <% if (page < totalPage) { %>
                <li>
                  <a href="/products?page=<%= page + 1 %>" aria-label="Next">
                    <i class="ti-angle-right"></i>
                  </a>
                </li>
                <% } %>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h3 class="title-section">Guide Populer</h3>
        <div class="row">
          <div class="guide-container">
            <% popularUsers.forEach(user => { %>
            <a href="/profile/<%= user.id %>" class="guide-item">
              <!-- image -->
              <div class="img-holder">
                <img src="<%= user.users_photo %>" alt="guide image" />
              </div>
              <!-- body -->
              <div class="guide-body">
                <div class="guide-name"><%= user.users_nama %></div>
                <div class="rating">
                  <div class="star">
                    <% for( let index = 0; index < user.avgRating; index++ ) { %>
                    <i class="fa fa-star" aria-hidden="true"></i>
                    <% } %>
                    <% for( let index = user.avgRating; index < 5; index++ ) { %>
                    <i class="fa fa-star-o" aria-hidden="true"></i>
                    <% } %>
                  </div>
                  <span class="rating-metric"><%= user.avgRating %>/5.0</span>
                </div>
                <span class="review-count">(<%= user.countReview %> Review)</span>
                <div class="description">
                  <p><%= user.users_description %></p>
                </div>
              </div>
            </a>
            <% }) %>
          </div>
          <div class="pagination-wrapper pagination-wrapper-center">
            <ul class="pg-pagination">
              <% if (page != 1) { %>
              <li>
                <a href="/products?page=<%= page - 1 %>" aria-label="Previous">
                  <i class="ti-angle-left"></i>
                </a>
              </li>
              <% } %>
              <% for( let index = 1; index <= totalPage; index++ ) { %>
              <li class="<%= page == index ? 'active' : '' %>">
                <a href="/products?page=<%= index %>"><%= index %></a>
              </li>
              <% } %>
              <% if (page < totalPage) { %>
              <li>
                <a href="/products?page=<%= page + 1 %>" aria-label="Next">
                  <i class="ti-angle-right"></i>
                </a>
              </li>
              <% } %>
            </ul>
          </div>
        </div>
      </section>
    </div>
    <!-- end container -->
  </section>
  <!-- end wpo-shop-section -->

  <!-- start of wpo-site-footer-section -->
  <%- include('../components/ui/footer.ejs') %>
  <!-- end of wpo-site-footer-section -->
</div>
